{% extends "base.html" %}

{% block content %}
<div class="slide {{ style }}">
    <h1 class="slide-title">{{ title }}</h1>
    
    <div class="content-area">
        <div style="display: flex; gap: 60px; width: 100%; height: 100%;">
            <!-- Left Column -->
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: flex-start; overflow: hidden;">
                {% set left_block_count = namespace(value=0) %}
                {% for block in content_blocks %}
                    {% if block.type == 'text' and block.position.x < width // 2 %}
                        <div style="margin-bottom: 30px; overflow: hidden;">
                            {% if block.section_title %}
                                <!-- Add section separator before section header (except first) -->
                                {% if left_block_count.value > 0 %}
                                    <div class="section-separator"></div>
                                {% endif %}
                                {% if block.icon %}
                                    <div class="section-header-with-icon">
                                        <svg class="section-icon">
                                            <use href="#{{ block.icon }}"/>
                                        </svg>
                                        <div class="section-header">{{ block.section_title }}</div>
                                    </div>
                                {% else %}
                                    <div class="section-header">{{ block.section_title }}</div>
                                {% endif %}
                            {% endif %}
                            <div class="text-content text-overflow-safe" style="-webkit-line-clamp: 8; max-height: calc(var(--content-size) * 1.4 * 8);">{{- block.content -}}</div>
                        </div>
                        {% set left_block_count.value = left_block_count.value + 1 %}
                    {% elif block.type == 'image_placeholder' and block.image_path and block.position.x < width // 2 %}
                        {% if left_block_count.value > 0 %}
                            <div class="content-divider"></div>
                        {% endif %}
                        <div class="image-container" style="position: relative; width: 100%; height: 350px; margin-bottom: 30px; max-width: none;">
                            <img src="{{ block.image_path }}" alt="Slide image">
                        </div>
                        {% set left_block_count.value = left_block_count.value + 1 %}
                    {% endif %}
                {% endfor %}
            </div>
            
            <!-- Right Column -->
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: flex-start; overflow: hidden;">
                {% set right_block_count = namespace(value=0) %}
                {% for block in content_blocks %}
                    {% if block.type == 'text' and block.position.x >= width // 2 %}
                        <div style="margin-bottom: 30px; overflow: hidden;">
                            {% if block.section_title %}
                                <!-- Add section separator before section header (except first) -->
                                {% if right_block_count.value > 0 %}
                                    <div class="section-separator"></div>
                                {% endif %}
                                {% if block.icon %}
                                    <div class="section-header-with-icon">
                                        <svg class="section-icon">
                                            <use href="#{{ block.icon }}"/>
                                        </svg>
                                        <div class="section-header">{{ block.section_title }}</div>
                                    </div>
                                {% else %}
                                    <div class="section-header">{{ block.section_title }}</div>
                                {% endif %}
                            {% endif %}
                            <div class="text-content text-overflow-safe" style="-webkit-line-clamp: 8; max-height: calc(var(--content-size) * 1.4 * 8);">{{- block.content -}}</div>
                        </div>
                        {% set right_block_count.value = right_block_count.value + 1 %}
                    {% elif block.type == 'image_placeholder' and block.image_path and block.position.x >= width // 2 %}
                        {% if right_block_count.value > 0 %}
                            <div class="content-divider"></div>
                        {% endif %}
                        <div class="image-container" style="position: relative; width: 100%; height: 350px; margin-bottom: 30px; max-width: none;">
                            <img src="{{ block.image_path }}" alt="Slide image">
                        </div>
                        {% set right_block_count.value = right_block_count.value + 1 %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- Footer accent line -->
    <div class="footer-accent"></div>
</div>
{% endblock %}
