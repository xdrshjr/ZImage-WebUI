{% extends "base.html" %}

{% block content %}
<style>
    .xhs-fashion-slide {
        background: linear-gradient(135deg, {{ colors.background }} 0%, {{ colors.accent }}08 50%, {{ colors.background }} 100%);
        position: relative;
        overflow: hidden;
    }
    
    .xhs-fashion-slide::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, {{ colors.accent }} 0%, {{ colors.accent }}80 50%, {{ colors.accent }} 100%);
        z-index: 1;
    }
    
    .xhs-fashion-title-wrapper {
        position: relative;
        padding: 40px 50px 30px 50px;
        background: linear-gradient(180deg, {{ colors.background }} 0%, transparent 100%);
    }
    
    .xhs-fashion-title {
        position: relative;
        padding-left: 50px;
    }
    
    .xhs-fashion-title::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 6px;
        height: 60%;
        background: linear-gradient(180deg, {{ colors.accent }} 0%, {{ colors.accent }}cc 100%);
        border-radius: 3px;
        box-shadow: 0 0 15px {{ colors.accent }}60;
    }
    
    .xhs-fashion-title::after {
        content: '';
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        width: 2px;
        height: 40%;
        background: {{ colors.accent }}40;
        border-radius: 1px;
    }
    
    .xhs-fashion-image-wrapper {
        position: relative;
        padding: 0 50px;
        margin: 20px 0;
    }
    
    .xhs-fashion-image-container {
        position: relative;
        border-radius: 24px;
        overflow: hidden;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15), 0 0 0 3px {{ colors.accent }}20;
        background: {{ colors.background }};
    }
    
    .xhs-fashion-image-container::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(135deg, {{ colors.accent }} 0%, {{ colors.accent }}80 50%, {{ colors.accent }} 100%);
        border-radius: 24px;
        z-index: -1;
        opacity: 0.3;
    }
    
    .xhs-fashion-text-card {
        background: linear-gradient(135deg, {{ colors.background }} 0%, {{ colors.accent }}05 100%);
        border-left: 4px solid {{ colors.accent }};
        border-radius: 16px;
        padding: 25px 30px;
        margin: 20px 50px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        position: relative;
    }
    
    .xhs-fashion-text-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(180deg, {{ colors.accent }} 0%, {{ colors.accent }}80 100%);
        border-radius: 16px 0 0 16px;
    }
</style>

<div class="slide {{ style }} xhs-fashion-slide" style="padding: 0;">
    <!-- Title Area with Decorative Elements -->
    <div class="xhs-fashion-title-wrapper">
        <h1 class="slide-title xhs-fashion-title" style="font-size: calc(var(--title-size) * 1.15); margin-bottom: 0;">
            {{ title }}
        </h1>
    </div>
    
    <!-- Image Area with Decorative Border -->
    <div class="xhs-fashion-image-wrapper" style="flex: 1; min-height: 50%; max-height: 55%; display: flex; align-items: center; justify-content: center;">
        {% set image_count = namespace(value=0) %}
        {% for block in content_blocks %}
            {% if block.type == 'image_placeholder' and block.image_path %}
                {% set image_count.value = image_count.value + 1 %}
            {% endif %}
        {% endfor %}
        
        {% if image_count.value >= 1 %}
            {% set displayed = namespace(value=0) %}
            {% for block in content_blocks %}
                {% if block.type == 'image_placeholder' and block.image_path and displayed.value < 1 %}
                    <div class="xhs-fashion-image-container" style="width: 90%; height: 100%;">
                        <img src="{{ block.image_path }}" alt="Slide image" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    {% set displayed.value = displayed.value + 1 %}
                {% endif %}
            {% endfor %}
        {% else %}
            <div class="xhs-fashion-image-container" style="width: 90%; height: 100%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, {{ colors.accent }}10 0%, {{ colors.accent }}05 100%);">
                <div style="text-align: center; color: {{ colors.text }}60; font-size: calc(var(--content-size) * 0.8);">
                    Image Placeholder
                </div>
            </div>
        {% endif %}
    </div>
    
    <!-- Text Content in Card Style -->
    <div style="flex: 1; min-height: 25%; max-height: 30%; overflow-y: auto; padding-bottom: 30px;">
        {% set text_block_count = namespace(value=0) %}
        {% for block in content_blocks %}
            {% if block.type == 'text' %}
                <div class="xhs-fashion-text-card">
                    {% if block.section_title %}
                        <div class="section-header" style="font-size: calc(var(--header-size) * 0.95); margin-bottom: 15px; text-transform: none; letter-spacing: 0.03em; color: {{ colors.accent }};">
                            {{ block.section_title }}
                        </div>
                    {% endif %}
                    <div class="text-content text-overflow-safe" style="font-size: calc(var(--content-size) * 0.9); line-height: 1.65; -webkit-line-clamp: 6; max-height: calc(var(--content-size) * 0.9 * 1.65 * 6); color: {{ colors.text }};">{{- block.content -}}</div>
                </div>
                {% set text_block_count.value = text_block_count.value + 1 %}
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endblock %}

